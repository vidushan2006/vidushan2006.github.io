<!DOCTYPE HTML>
<html>
<head>
  <title>VIDU</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

  <style>
  /* Scoped page CSS */
  body.videos-page {
    background: url('assets/images/background.gif') no-repeat center center fixed !important;
    background-size: cover !important;
    font-family: "Helvetica Neue", Arial, sans-serif !important;
    margin:0 !important;
    color: #fff !important;
  }

  header#header { display:flex; align-items:center; justify-content:space-between; padding:12px 22px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); backdrop-filter: blur(8px) saturate(120%); border-radius:0 0 8px 8px; box-shadow:0 8px 40px rgba(2,4,12,0.6); }

  .list-container{list-style:none;padding:10px;margin:0;display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
  .list-item{width:180px;text-align:left;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:10px;cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
  .list-item img{width:100%;height:100px;object-fit:cover;border-radius:6px}
  .list-item .title{font-weight:700;margin-top:8px;font-size:14px}

  #player-wrap{width:100%;max-width:1000px;margin:12px auto;border-radius:10px;overflow:hidden;background:#000;position:relative}
  .vidu-player-host{position:relative;width:100%;overflow:hidden;border-radius:8px;background:#000}
  .vidu-mount{width:100%;height:520px;background:#black}
  .vidu-mount iframe{width:100%;height:100%;display:block;border:0;pointer-events:none}

  .vidu-controls-bg{position:absolute;left:0;right:0;bottom:0;height:64px;background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.75));pointer-events:none;z-index:9996}
  .vidu-overlay{position:absolute;left:12px;right:12px;bottom:12px;z-index:9999;display:flex;gap:12px;align-items:center;padding:8px 12px;border-radius:10px;box-sizing:border-box;pointer-events:auto;flex-wrap:wrap;justify-content:flex-start}
  .vidu-btn{background:rgba(255,255,255,0.06);color:#fff;padding:8px;border-radius:22px;cursor:pointer;width:46px;height:46px;display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.04)}
  .vidu-range{flex:1;height:8px;border-radius:8px;background:rgba(255,255,255,0.06);min-width:100px}
  .vidu-time{min-width:90px;text-align:center;font-weight:800;color:#cbd5ff}
  .vidu-close-btn{position:absolute;top:10px;right:10px;background:rgba(0,0,0,0.46);border-radius:8px;padding:6px;border:1px solid rgba(255,255,255,0.06);color:#fff}

  /* QUALITY button & menu (top-left) */
  .vidu-quality-btn {
    position:absolute;
    top:10px;
    left:10px;
    z-index:10003;
    width:44px;
    height:28px;
    padding:4px 8px;
    border-radius:6px;
    background:rgba(0,0,0,0.52);
    border:1px solid rgba(255,255,255,0.06);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800;
    cursor:pointer;
    gap:6px;
    font-size:13px;
    letter-spacing:0.8px;
    user-select:none;
  }
  .vidu-quality-menu {
    position:absolute;
    top:44px;
    left:10px;
    z-index:10004;
    min-width:140px;
    background:linear-gradient(180deg, rgba(10,10,10,0.98), rgba(8,8,8,0.95));
    border-radius:8px;
    box-shadow:0 12px 40px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.04);
    overflow:hidden;
    display:none;
    padding:6px;
  }
  .vidu-quality-menu.open { display:block; }
  .vidu-quality-menu button { display:block; width:100%; text-align:left; border:none; background:transparent; color:#ddd; padding:8px 10px; border-radius:6px; cursor:pointer; font-weight:700; }
  .vidu-quality-menu button:hover { background:rgba(255,255,255,0.02); color:#fff; }
  .vidu-quality-menu button.active { color: #39ff14; background: rgba(255,255,255,0.02); }

  /* volume icon + vertical slider */
  .vidu-volume-btn {
    position:relative;
    width:46px;
    height:46px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border-radius:22px;
    background:rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.04);
    cursor:pointer;
    color:#fff;
    font-weight:800;
    flex:0 0 auto;
  }
  .vidu-volume-menu {
    position:absolute;
    bottom:58px;
    left:50%;
    transform:translateX(-50%);
    display:none;
    width:44px;
    padding:8px 6px;
    border-radius:8px;
    background:linear-gradient(180deg, rgba(10,10,10,0.98), rgba(8,8,8,0.95));
    border:1px solid rgba(255,255,255,0.04);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    z-index:10005;
    align-items:center;
    justify-content:center;
  }
  .vidu-volume-menu.open { display:flex; }
  .vidu-volume-vertical {
    -webkit-appearance:none;
    appearance:none;
    width:96px;
    height:8px;
    transform:rotate(-90deg);
    transform-origin:center;
    outline:none;
    background:rgba(255,255,255,0.06);
    border-radius:8px;
  }
  .vidu-volume-vertical::-webkit-slider-thumb{
    -webkit-appearance:none;
    width:14px;height:14px;border-radius:50%;background:#39ff14;border:2px solid rgba(0,0,0,0.12);box-shadow:0 2px 6px rgba(0,0,0,0.45);
  }
  .vidu-volume-vertical::-moz-range-thumb{ width:14px;height:14px;border-radius:50%;background:#39ff14;border:2px solid rgba(0,0,0,0.12); }

  @media (max-width:720px){ .vidu-mount{ height:320px; } .vidu-overlay{ left:8px; right:8px; bottom:8px; gap:8px; padding:8px; } .vidu-volume-vertical{width:80px} .vidu-volume-menu{left:50%;} }
  </style>
</head>
<body class="videos-page">
  <header id="header">
    <div style="display:flex;align-items:center;gap:12px">
      <a href="index.html" style="display:flex;align-items:center;text-decoration:none;color:#fff">
        <div style="width:64px;height:64px;border-radius:50%;background:#07120b;display:flex;align-items:center;justify-content:center;border:8px solid rgba(255,255,255,0.05)"><img src="assets/images/logo.jpg" alt="logo" style="width:100%;height:100%;object-fit:cover;border-radius:50%"></div>
        <div style="margin-left:12px"><strong>VIDU</strong></div>
      </a>
    </div>
    <nav>
      <a href="index.html" style="color:#dfeee1;margin-right:12px;font-weight:700">Home</a>
      <a href="videos.html" style="color:#dfeee1;margin-right:12px;font-weight:700">Private</a>
      <a href="about.html" style="color:#dfeee1;font-weight:700">About</a>
    </nav>
  </header>

  <main style="padding:22px;">
    <section>
      <ul class="list-container" id="playlist-list">
        <!-- playlist tiles injected by the page script -->
      </ul>
    </section>

    <section id="player-section" style="margin-top:18px">
      <div id="player-wrap">
        <!-- advanced player will mount here -->
      </div>
    </section>
  </main>

  <footer style="padding:28px;text-align:center;color:#dfeee1">Â© VIDU</footer>

<script>
(function(){
  /* Local helper functions for time formatting */
  function pad2(n){ n = Math.max(0, Math.floor(n||0)); return (n < 10 ? '0' + n : String(n)); }
  function fmtCurrentFromSeconds(s){
    s = Math.max(0, Math.floor(s||0));
    if(s < 3600){
      const m = Math.floor(s/60);
      const sec = s % 60;
      return pad2(m) + ' : ' + pad2(sec);
    } else {
      const h = Math.floor(s/3600);
      const m = Math.floor((s%3600)/60);
      return pad2(h) + ' : ' + pad2(m);
    }
  }
  function fmtDurationFromSeconds(s){
    s = Math.max(0, Math.floor(s||0));
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    return pad2(h) + ' : ' + pad2(m);
  }
})();
</script>

<!-- Full advanced player + HQ menu (mirrors index.html with vertical volume slider) -->
<script>
(function(){
  if(window.__viduPlayerLoadedOnVideos) return;
  window.__viduPlayerLoadedOnVideos = true;

  const YT_API_KEY = 'AIzaSyDFyNxJJ_LbTEwLZkcLZ0wT3bDNfGcHCAI';
  const state = { player: null, updateInterval: null, host: null, mount: null, mo: null, inactivityTimer: null, lastActivity: Date.now(), desiredPlaying: null, lastVolume: 100 };

  function loadYTApi(){
    if(window.YT && window.YT.Player) return Promise.resolve();
    if(window._vidu_loading_yt_v) {
      return new Promise((res, rej)=>{
        const t = setInterval(()=>{ if(window.YT && window.YT.Player){ clearInterval(t); res(); } },80);
        setTimeout(()=>{ clearInterval(t); rej(new Error('YT load timeout')); },20000);
      });
    }
    window._vidu_loading_yt_v = true;
    return new Promise((resolve,reject)=>{
      const s=document.createElement('script');
      s.src='https://www.youtube.com/iframe_api';
      s.async=true;
      s.onerror = ()=> reject(new Error('YT API failed to load'));
      document.head.appendChild(s);
      window.onYouTubeIframeAPIReady = function(){ resolve(); };
      setTimeout(()=>{ if(window.YT && window.YT.Player) resolve(); },1200);
      setTimeout(()=>{ if(!(window.YT && window.YT.Player)) reject(new Error('YT API timed out')); },20000);
    });
  }

  function playSVG(){ return `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 4.5v15l12-7.5L6 4.5z" fill="#fff"/></svg>`; }
  function pauseSVG(){ return `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="5" y="4" width="4" height="16" rx="1.2" fill="#fff"/><rect x="15" y="4" width="4" height="16" rx="1.2" fill="#fff"/></svg>`; }

  function createHostElements(){
    const wrap = document.getElementById('player-wrap');
    if(!wrap) throw new Error('#player-wrap not found');
    wrap.innerHTML = '';
    const host = document.createElement('div'); host.className = 'vidu-player-host';
    const mount = document.createElement('div'); mount.className = 'vidu-mount'; mount.id = 'vidu_mount_'+Math.floor(Math.random()*1e6);
    mount.style.height = '520px';
    host.appendChild(mount);

    const qbtn = document.createElement('button');
    qbtn.className = 'vidu-quality-btn';
    qbtn.id = 'vidu_quality_btn';
    qbtn.type = 'button';
    qbtn.innerText = 'HQ';
    host.appendChild(qbtn);

    const qmenu = document.createElement('div');
    qmenu.className = 'vidu-quality-menu';
    qmenu.id = 'vidu_quality_menu';
    host.appendChild(qmenu);

    const ctrlBg = document.createElement('div'); ctrlBg.className = 'vidu-controls-bg';
    host.appendChild(ctrlBg);

    const overlay = document.createElement('div'); overlay.className = 'vidu-overlay';
    overlay.innerHTML = `
      <div class="inner-bg" aria-hidden="true"></div>
      <button class="vidu-btn" id="vidu_playbtn">${playSVG()}</button>
      <div class="vidu-time" id="vidu_cur">00 : 00</div>
      <input id="vidu_seek" class="vidu-range" type="range" min="0" max="100" step="0.1" value="0" />
      <div class="vidu-time" id="vidu_dur">00 : 00</div>
      <div id="vidu_vol_control" style="display:inline-flex;align-items:center;justify-content:center;">
        <button id="vidu_vol_btn" class="vidu-volume-btn" aria-label="Volume">ðŸ”Š</button>
        <div id="vidu_vol_menu" class="vidu-volume-menu" aria-hidden="true">
          <input id="vidu_vol_slider" class="vidu-volume-vertical" type="range" min="0" max="100" step="1" value="100" />
        </div>
      </div>
      <button class="vidu-btn" id="vidu_fullbtn">â¤¢</button>
    `;
    host.appendChild(overlay);

    const closeBtn = document.createElement('button');
    closeBtn.className = 'vidu-close-btn';
    closeBtn.innerText = 'âœ•';
    closeBtn.addEventListener('click', ()=> {
      try{ if(window.destroyViduPlayer) window.destroyViduPlayer(); document.getElementById('player-wrap').innerHTML=''; }catch(e){}
    });
    host.appendChild(closeBtn);

    wrap.appendChild(host);
    return { host, mount, overlay, ctrlBg, qbtn, qmenu, closeBtn, volBtn: overlay.querySelector('#vidu_vol_btn'), volMenu: overlay.querySelector('#vidu_vol_menu'), volSlider: overlay.querySelector('#vidu_vol_slider') };
  }

  function disableIframeClicks(host){
    try{
      const ifr = host.querySelector('iframe');
      if(ifr){
        ifr.style.pointerEvents = 'none';
        ifr.setAttribute('allow','autoplay; encrypted-media; fullscreen');
        ifr.setAttribute('allowfullscreen','');
        ifr.setAttribute('tabindex','-1');
      }
    }catch(e){}
  }

  function populateQualityMenu(qmenu, player, levels){
    qmenu.innerHTML = '';
    const add = (key,label,active)=>{
      const b = document.createElement('button');
      b.type='button';
      b.dataset.qualityKey = key;
      b.textContent = label;
      if(active) b.classList.add('active');
      b.addEventListener('click', (ev)=>{ ev.stopPropagation(); try{ if(player && typeof player.setPlaybackQuality === 'function') player.setPlaybackQuality(key); qmenu.querySelectorAll('button').forEach(x=>x.classList.remove('active')); b.classList.add('active'); qmenu.classList.remove('open'); }catch(e){ console.warn(e); } });
      qmenu.appendChild(b);
    };
    add('default','Auto',false);
    const order = ['highres','hd1080','hd720','large','medium','small'];
    const present = (Array.isArray(levels) && levels.length>0) ? levels.slice() : [];
    order.forEach(k=>{
      if(present.indexOf(k) !== -1){
        const label = k==='highres' ? 'Highres' : (k==='hd1080' ? '1080p' : (k==='hd720'? '720p' : (k==='large'? '480p' : (k==='medium'?'360p':'144p'))));
        add(k,label,false);
      }
    });
    if(present.length === 0){
      add('small','144p',false); add('medium','360p',false); add('large','480p',false); add('hd720','720p',false);
    }
  }

  function createPlayer(videoId){
    const { host, mount, overlay, ctrlBg, qbtn, qmenu, closeBtn, volBtn, volMenu, volSlider } = createHostElements();
    state.host = host; state.mount = mount;

    const playBtn = overlay.querySelector('#vidu_playbtn');
    const curEl = overlay.querySelector('#vidu_cur');
    const durEl = overlay.querySelector('#vidu_dur');
    const seekEl = overlay.querySelector('#vidu_seek');
    const fullBtn = overlay.querySelector('#vidu_fullbtn');

    function toggleFullscreen(){
      const req = host.requestFullscreen || host.webkitRequestFullscreen || host.mozRequestFullScreen || host.msRequestFullscreen;
      const exit = document.exitFullscreen || document.webkitExitFullscreen || document.mozCancelFullScreen || document.msExitFullscreen;
      if(document.fullscreenElement === host || document.webkitFullscreenElement === host) { if(exit) exit.call(document); }
      else if(req) req.call(host);
    }
    fullBtn.addEventListener('click', toggleFullscreen);

    // quality toggling
    let qualityMenuOpen = false;
    qbtn.addEventListener('click', (ev)=>{ ev.stopPropagation(); qualityMenuOpen ? qmenu.classList.remove('open') : qmenu.classList.add('open'); qualityMenuOpen = !qualityMenuOpen; });
    document.addEventListener('click', (e)=>{ if(qualityMenuOpen && !qmenu.contains(e.target) && !qbtn.contains(e.target)){ qmenu.classList.remove('open'); qualityMenuOpen=false; } }, {passive:true});
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') { qmenu.classList.remove('open'); qualityMenuOpen=false; } }, {passive:true});

    // volume button toggle - shows vertical slider upward
    if(volBtn && volMenu && volSlider){
      volBtn.addEventListener('click', (ev)=>{
        ev.stopPropagation();
        const open = volMenu.classList.toggle('open');
        volMenu.setAttribute('aria-hidden', open ? 'false' : 'true');
        if(open){
          try{
            const btnRect = volBtn.getBoundingClientRect();
            const hostRect = host.getBoundingClientRect();
            volMenu.style.left = (btnRect.left - hostRect.left + (btnRect.width/2)) + 'px';
            const menuRect = volMenu.getBoundingClientRect();
            volMenu.style.top = (btnRect.top - hostRect.top - menuRect.height - 8) + 'px';
            volMenu.style.transform = 'translateX(-50%)';
          }catch(e){}
        }
      });

      volSlider.addEventListener('input', (e)=>{
        const v = Math.max(0, Math.min(100, parseInt(e.target.value,10) || 0));
        state.lastVolume = v;
        try{ if(state.player && typeof state.player.setVolume === 'function'){ state.player.setVolume(v); if(v===0 && typeof state.player.mute === 'function') state.player.mute(); else if(v>0 && typeof state.player.unMute === 'function') state.player.unMute(); } }catch(e){}
        e.target.style.background = `linear-gradient(90deg, #39ff14 ${v}%, rgba(255,255,255,0.06) ${v}%)`;
      }, {passive:true});
    }

    // seek handling
    seekEl.addEventListener('pointerdown', ()=> seekEl._drag=true, {passive:true});
    seekEl.addEventListener('pointerup', ()=>{ seekEl._drag=false; if(!state.player) return; const dur = state.player.getDuration ? state.player.getDuration() : 0; if(dur) state.player.seekTo(dur * (parseFloat(seekEl.value)/100), true); }, {passive:true});
    seekEl.addEventListener('input', ()=>{ if(seekEl._drag && state.player){ const dur = state.player.getDuration ? state.player.getDuration() : 0; if(dur) curEl.textContent = fmtCurrentFromSeconds(Math.floor(dur * (parseFloat(seekEl.value)/100))); updateSeek(seekEl); } }, {passive:true});

    function updateSeek(el){ try{ const v = Math.max(0, Math.min(100, parseFloat(el.value)||0)); el.style.background = `linear-gradient(90deg, #39ff14 ${v}%, rgba(255,255,255,0.06) ${v}%)`; }catch(e){} }
    updateSeek(seekEl);

    // play/pause
    playBtn.addEventListener('click', ()=> {
      if(!state.player) return;
      const st = state.player.getPlayerState ? state.player.getPlayerState() : -1;
      const want = !(st === 1);
      state.desiredPlaying = want;
      playBtn.innerHTML = want ? pauseSVG() : playSVG();
      try{ if(want) state.player.playVideo(); else state.player.pauseVideo(); }catch(e){ console.warn(e); }
      resetInactivityTimer();
    });

    function setOverlayHidden(h){
      if(h){ overlay.classList.add('hidden'); ctrlBg.classList.add('hidden'); if(closeBtn) closeBtn.classList.add('hidden'); if(qbtn) qbtn.classList.add('hidden'); if(volBtn) volBtn.classList.add('hidden'); if(volMenu) volMenu.classList.remove('open'); qmenu.classList.remove('open'); }
      else { overlay.classList.remove('hidden'); ctrlBg.classList.remove('hidden'); if(closeBtn) closeBtn.classList.remove('hidden'); if(qbtn) qbtn.classList.remove('hidden'); if(volBtn) volBtn.classList.remove('hidden'); }
    }

    function resetInactivityTimer(){
      state.lastActivity = Date.now();
      setOverlayHidden(false);
      if(state.inactivityTimer){ clearTimeout(state.inactivityTimer); state.inactivityTimer=null; }
      state.inactivityTimer = setTimeout(()=>{
        try{ const st = state.player && state.player.getPlayerState ? state.player.getPlayerState() : -1; if(st === 1 || st === 3 || st === -1 || st === 0 || st === 5) setOverlayHidden(true); }catch(e){}
      }, 5000);
    }
    ['mousemove','pointermove','touchstart','touchmove','keydown','mousedown'].forEach(ev => { try{ host.addEventListener(ev, resetInactivityTimer, {passive:true}); document.addEventListener(ev, resetInactivityTimer, {passive:true}); }catch(e){} });

    // load YT and create player
    return loadYTApi().then(()=> new Promise((resolve,reject)=>{
      try{
        state.player = new YT.Player(mount.id, {
          videoId: videoId,
          width: '100%',
          height: '100%',
          playerVars: { controls:0, disablekb:1, rel:0, modestbranding:1, playsinline:1, iv_load_policy:3, origin: location.origin },
          events: {
            onReady: function(evt){
              disableIframeClicks(host);
              try{
                const v = Math.max(0, Math.min(100, state.lastVolume || 100));
                if(typeof evt.target.setVolume === 'function'){ evt.target.setVolume(v); if(v===0 && typeof evt.target.mute === 'function') evt.target.mute(); else if(v>0 && typeof evt.target.unMute === 'function') evt.target.unMute(); }
                const vs = document.getElementById('vidu_vol_slider'); if(vs){ vs.value = v; vs.style.background = `linear-gradient(90deg, #39ff14 ${v}%, rgba(255,255,255,0.06) ${v}%)`; }
              }catch(e){}
              let avail = [];
              try{ if(typeof evt.target.getAvailableQualityLevels === 'function') avail = evt.target.getAvailableQualityLevels() || []; }catch(e){}
              populateQualityMenu(qmenu, evt.target, avail);
              try{ if(typeof evt.target.setPlaybackQuality === 'function'){ evt.target.setPlaybackQuality('default'); setTimeout(()=>{ try{ evt.target.setPlaybackQuality('default'); }catch(e){} }, 600); } }catch(e){}
              try{ evt.target.playVideo(); }catch(e){}

              if(state.updateInterval) clearInterval(state.updateInterval);
              state.updateInterval = setInterval(()=>{
                try{
                  if(!state.player) return;
                  const dur = state.player.getDuration ? state.player.getDuration() : 0;
                  const cur = state.player.getCurrentTime ? state.player.getCurrentTime() : 0;
                  curEl.textContent = fmtCurrentFromSeconds(Math.floor(cur));
                  durEl.textContent = (dur && isFinite(dur)) ? fmtDurationFromSeconds(Math.floor(dur)) : fmtDurationFromSeconds(0);
                  if(!seekEl._drag && dur && isFinite(dur)) {
                    seekEl.value = (cur / Math.max(1,dur)) * 100;
                    updateSeek(seekEl);
                  }
                  const st = state.player.getPlayerState ? state.player.getPlayerState() : -1;
                  if(state.desiredPlaying !== null){
                    if(state.desiredPlaying && st !== 1) try{ state.player.playVideo(); }catch(e){}
                    else if(!state.desiredPlaying && st === 1) try{ state.player.pauseVideo(); }catch(e){}
                  }
                }catch(e){}
              }, 160);

              if(state.mo) state.mo.disconnect();
              state.mo = new MutationObserver(()=> disableIframeClicks(host));
              state.mo.observe(host, { childList:true, subtree:true });
              resetInactivityTimer();
              resolve(state.player);
            },
            onError: function(err){ reject(err); }
          }
        });
      }catch(err){ reject(err||new Error('create failed')); }
    })).catch(err=>{ throw err; });
  }

  window.showViduPlayer = function(videoId){
    return createPlayer(videoId);
  };
  window.destroyViduPlayer = function(){
    try{ if(state.updateInterval) clearInterval(state.updateInterval); }catch(e){}
    try{ if(state.player && typeof state.player.destroy === 'function') state.player.destroy(); }catch(e){}
    state.player = null;
    const wrap = document.getElementById('player-wrap'); if(wrap) wrap.innerHTML = '';
  };

})();
</script>

<!-- Playlist + basic password UI for this page -->
<script>
/* Minimal playlist data + simple modal-like password unlock flow for this page.
   Clicking an item opens and calls showViduPlayer(id) after password verified. */

const sampleList = [
  { type:'playlist', name:'SFT - Playlist', idB64: btoa('PL9zX0VbNmKiGt19HZ9wzIwC-VQ_AN0z9K&si=0jJc5HTa68Weq851'), passB64: btoa('vidu123sft'), thumbnail:'https://i.pinimg.com/736x/b8/de/57/b8de57f639bb30fd9f48cda542dd96d2.jpg' },
  { type:'video', name:'TEST VIDEO', idB64: btoa('Lexok6H2c2s'), passB64: btoa('vidu123test'), thumbnail:'https://i.pinimg.com/736x/19/b2/42/19b2424009813fc558e8a785c794cbdf.jpg' }
];

function b64(s){ try{ return atob(s); }catch(e){ return s; } }
function escape(t){ return (t||'').replace(/[&<>"'`]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;","`":"&#96;"}[c])); }

function renderList(){
  const ul = document.getElementById('playlist-list');
  sampleList.forEach(i=>{
    const li = document.createElement('li'); li.className='list-item';
    li.innerHTML = `<img src="${escape(i.thumbnail)}" alt=""><div class="title">${escape(i.name)}</div>`;
    li.onclick = ()=> openPassword(i);
    ul.appendChild(li);
  });
}
function openPassword(item){
  const pass = prompt('Enter password for ' + (item.name||'item'));
  if(pass === b64(item.passB64 || '')) {
    if(item.type === 'playlist'){
      const pid = b64(item.idB64 || '');
      (async function(){
        try{
          const playlistId = pid.split('&')[0];
          const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${encodeURIComponent(playlistId)}&key=${encodeURIComponent(YT_API_KEY)}`;
          const res = await fetch(url);
          if(!res.ok) throw new Error('YT fetch failed');
          const data = await res.json();
          const first = (data.items||[]).find(it=>it.snippet && it.snippet.resourceId && it.snippet.resourceId.videoId);
          const vid = first && first.snippet && first.snippet.resourceId && first.snippet.resourceId.videoId;
          if(vid){
            document.getElementById('player-wrap').scrollIntoView({behavior:'smooth'});
            try{ window.showViduPlayer(vid); }catch(e){ console.error(e); alert('Failed to start player'); }
          } else alert('No playable video found in playlist');
        }catch(err){ console.error(err); alert('Failed to load playlist: '+ (err.message||err)); }
      })();
    } else {
      const id = b64(item.idB64 || '');
      document.getElementById('player-wrap').scrollIntoView({behavior:'smooth'});
      try{ window.showViduPlayer(id); }catch(e){ console.error(e); alert('Failed to start player'); }
    }
  } else {
    alert('Incorrect password');
  }
}

document.addEventListener('DOMContentLoaded', ()=> renderList());
</script>

<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
</body>
</html>
