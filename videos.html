<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Private Classes ‚Äî VIDU</title>

  <style>
    /* ---- ROOT VARIABLES & GLOBAL STYLES ---- */
    :root {
      --bg-main: #0A0C10;
      --bg-glass: rgba(16, 20, 28, 0.6);
      --border-color: rgba(136, 146, 176, 0.2);
      --glow-color: rgba(0, 255, 138, 0.8);
      --accent-primary: #00FF8A;
      --accent-secondary: #40E0D0;
      --text-primary: #E0E6F1;
      --text-secondary: #8892B0;
      --font-main: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      --font-mono: 'Roboto Mono', monospace, sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth;
    }

    body {
      background-color: var(--bg-main);
      background-image: url('assets/images/background.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: var(--text-primary);
      font-family: var(--font-main);
      line-height: 1.5;
      height: 100%;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: -1;
      background: 
        radial-gradient(ellipse at center, rgba(10, 12, 16, 0.4) 0%, rgba(10, 12, 16, 0.95) 100%),
        linear-gradient(rgba(10, 12, 16, 0.2), rgba(10, 12, 16, 0.2)),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.04'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    /* ---- TOP NAVIGATION BAR ---- */
    .topbar {
      position: fixed;
      left: 0;
      right: 0;
      top: 0;
      z-index: 120;
      background: rgba(10, 12, 16, 0.5);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border-color);
      box-shadow: 0 6px 30px rgba(0, 0, 0, 0.4);
    }

    .topbar-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .left {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 46px;
      height: 46px;
      border-radius: 8px;
      background: linear-gradient(145deg, #10141C, #0A0C10);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      text-decoration: none;
      border: 1px solid var(--border-color);
      transition: all .2s ease;
    }
    .logo-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.6), 0 0 15px var(--glow-color);
      border-color: var(--accent-primary);
    }

    .nav {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .nav a, .nav button {
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 12px;
      font-weight: 700;
      border-radius: 6px;
      font-size: 14px;
      background: transparent;
      border: 0;
      cursor: pointer;
      transition: color .2s ease, transform .2s ease;
    }

    .nav a:hover, .nav button:hover {
      color: var(--text-primary);
      transform: translateY(-2px);
    }

    /* ---- PAGE CONTENT ---- */
    .page {
      margin-top: 100px;
      min-height: calc(100vh - 120px);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px;
    }

    .title {
      font-size: 48px;
      font-weight: 900;
      color: #fff;
      text-shadow: 0 0 10px rgba(0, 255, 138, 0.2), 0 0 20px rgba(0, 0, 0, 0.8);
      margin-bottom: 8px;
      letter-spacing: -1px;
    }

    .subtitle {
      color: var(--text-secondary);
      margin-bottom: 40px;
      font-size: 16px;
      max-width: 600px;
    }

    /* ---- CONTENT CARDS ---- */
    .tiles {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 24px;
    }
    
    .card {
      all: unset;
      display: block;
      position: relative;
      background: var(--bg-glass);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.3s ease;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform-style: preserve-3d;
      min-height: 280px;
    }
    .card:hover {
      transform: translateY(-10px) perspective(1000px) rotateX(2deg) rotateY(-2deg) scale(1.02);
      box-shadow: 0 20px 50px rgba(0,0,0,0.7);
    }
    .card .card-border {
      position: absolute;
      inset: 0;
      border-radius: 12px;
      border: 1px solid transparent;
      transition: border-color .3s ease;
      pointer-events: none;
    }
    .card:hover .card-border {
      border-color: var(--accent-primary);
    }
    .card .card-glow {
      position: absolute;
      inset: -2px;
      border-radius: 14px;
      background: radial-gradient(ellipse at center, var(--glow-color), transparent 70%);
      opacity: 0;
      transition: opacity .3s ease;
      pointer-events: none;
      filter: blur(20px);
    }
    .card:hover .card-glow {
      opacity: 0.15;
    }
    .card-thumbnail {
      height: 160px;
      background: linear-gradient(45deg, #0A0C10, #10141C);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-bottom: 1px solid var(--border-color);
    }
    .card .thumbnail-icon {
      color: var(--accent-primary);
      opacity: 0.7;
      transition: opacity .3s ease, transform .3s ease;
    }
    .card:hover .thumbnail-icon {
      opacity: 1;
      transform: scale(1.1);
    }
    .card .thumbnail-overlay {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(to right, var(--border-color) 1px, transparent 1px),
        linear-gradient(to bottom, var(--border-color) 1px, transparent 1px);
      background-size: 20px 20px;
      opacity: 0.2;
    }
    .card-content {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .card-type {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--accent-secondary);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .card-title {
      font-weight: 800;
      color: var(--text-primary);
      font-size: 16px;
      line-height: 1.3;
    }

    /* ---- MODALS ---- */
    .modal {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      z-index: 300;
      padding: 18px;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
    }
    .modal:not(.hidden) {
      opacity: 1;
      pointer-events: auto;
    }
    .modal.hidden {
      display: none;
    }
    .modal-box {
      max-width: 420px;
      width: 100%;
      background: var(--bg-glass);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.7);
      color: #fff;
      text-align: center;
      position: relative;
      border: 1px solid var(--border-color);
      transform: scale(0.95);
      transition: transform .2s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    .modal:not(.hidden) .modal-box {
      transform: scale(1);
    }
    .modal-close {
      position: absolute;
      right: 12px;
      top: 12px;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      font-size: 20px;
      cursor: pointer;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background .2s ease, color .2s ease;
    }
    .modal-close:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
    }

    /* ---- BUTTONS & INPUTS ---- */
    .pw-input, .login-input {
      width: 100%;
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      background: rgba(0, 0, 0, 0.3);
      color: var(--text-primary);
      margin-top: 10px;
      font-size: 15px;
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    .pw-input:focus, .login-input:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 10px var(--glow-color);
    }
    .pw-actions, .login-actions {
      display: flex;
      gap: 8px;
      margin-top: 16px;
      justify-content: center;
    }
    
    /* MODIFIED: Button color corrected for readability */
    .btn {
      padding: 10px 24px;
      border-radius: 8px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      background: linear-gradient(180deg, #00b86a, #008f55);
      color: white;
      font-size: 15px;
      transition: transform 0.18s ease, box-shadow .2s ease;
      box-shadow: 0 4px 15px rgba(0, 184, 106, 0.2);
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 184, 106, 0.3);
    }
    .btn.ghost {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      box-shadow: none;
    }
    .btn.ghost:hover {
      background: rgba(255,255,255,0.05);
      border-color: var(--text-secondary);
      box-shadow: none;
    }

    .login-btn-top {
      background: linear-gradient(180deg, #00b86a, #008f55);
      color: white;
      font-weight: 700;
      font-size: 14px;
      padding: 10px 16px;
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 138, 0.3);
      cursor: pointer;
      transition: all .18s ease;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    .login-btn-top:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.5), 0 0 15px rgba(0, 184, 106, 0.8);
      border-color: #00b86a;
    }
    .login-btn-top:disabled {
      background: var(--bg-glass);
      border-color: var(--border-color);
      cursor: default;
      opacity: 0.8;
      transform: none;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    /* ---- VIDEO PLAYER VIEWER ---- */
    .viewer {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.78);
      backdrop-filter: blur(16px);
      z-index: 400;
      padding: 22px;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
    }
    .viewer:not(.hidden) {
      opacity: 1;
      pointer-events: auto;
    }
    .viewer.hidden {
      display: none;
    }
    .viewer-inner {
      width: 100%;
      max-width: 1100px;
      height: 72vh;
      border-radius: 12px;
      overflow: hidden;
      background: #000;
      position: relative;
      box-shadow: 0 30px 80px rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border-color);
    }
    .viewer-close {
        position: absolute;
        top: 14px;
        right: 14px;
        z-index: 10003;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: rgba(0,0,0,0.5);
        border: 1px solid var(--border-color);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        cursor: pointer;
        transition: all .18s ease;
    }
    .viewer-close:hover {
      transform: scale(1.1);
      background: rgba(255,255,255,0.1);
    }

    /* MODIFIED: Darker background for title readability */
    .now-playing {
      width: 100%;
      padding: 12px 18px;
      background: linear-gradient(180deg, rgba(10, 12, 16, 0.9), rgba(10, 12, 16, 0.7));
      backdrop-filter: blur(4px);
      color: var(--text-primary);
      font-weight: 900;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--border-color);
      z-index: 8;
    }
    .now-playing .label { 
      font-family: var(--font-mono);
      color: var(--accent-secondary);
      font-weight: 800; 
      font-size: 13px;
      text-transform: uppercase; 
    }
    .now-playing .title { 
      color: #fff;
      font-size: 15px; 
      font-weight: 900;
      white-space: nowrap; 
      overflow: hidden; 
      text-overflow: ellipsis; 
    }

    .iframe-wrap{width:100%;height:100%;display:block;background:#000;position:relative;}
    
    /* ---- PLAYER UI STYLES ---- */
    .vidu-player-host {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        border-radius: 8px;
        background: #000;
    }
    .vidu-mount { width: 100%; height: 100%; background: #000; }
    .vidu-mount iframe { width: 100%; height: 100%; border: 0; display: block; }
    
    .vidu-loading {
      position: absolute;
      inset: 0;
      z-index: 9998;
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: url('assets/images/header.png');
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      transition: opacity .28s ease;
      pointer-events: none;
    }
    .vidu-loading.hidden { opacity: 0; display: none; }

    .vidu-controls-bg {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 90px;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,0.8));
      pointer-events: none;
      z-index: 9996;
      opacity: 1;
      transition: opacity .22s ease;
    }
    .vidu-controls-bg.hidden { opacity: 0; }

    .vidu-overlay {
      position: absolute;
      left: 12px;
      right: 12px;
      bottom: 12px;
      z-index: 9999;
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 8px 12px;
      border-radius: 10px;
      background: var(--bg-glass);
      border: 1px solid var(--border-color);
      backdrop-filter: blur(8px);
      transition: opacity .22s ease, transform .22s ease;
    }
    .vidu-overlay.hidden { opacity: 0; transform: translateY(6px); pointer-events: none; }

    .vidu-btn {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border-radius: 50%;
      cursor: pointer;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 42px;
      height: 42px;
      transition: transform .12s ease, background .2s ease;
    }
    .vidu-btn:hover { background: rgba(255, 255, 255, 0.2); }
    .vidu-btn:active { transform: scale(.96); }
    
    .vidu-range {
      flex: 1;
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.2);
      transition: height .2s ease;
      outline: none;
    }
    .vidu-range:hover { height: 8px; }
    .vidu-range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent-primary);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
      border: none;
      cursor: pointer;
    }
    .vidu-range::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent-primary);
      border: none;
      cursor: pointer;
    }

    .vidu-time {
      min-width: 90px;
      font-size: 14px;
      font-weight: 700;
      font-family: var(--font-mono);
      color: var(--text-secondary);
      text-align: center;
      letter-spacing: 1px;
    }
    
    .vidu-close-btn{
      position:absolute; top:10px; right:10px; z-index:10002; width:36px; height:36px; padding:6px;
      border-radius:8px; background:rgba(0,0,0,0.46); border:1px solid rgba(255,255,255,0.06);
      color:#fff; display:flex; align-items:center; justify-content:center; font-weight:800;
      cursor:pointer; box-shadow:0 8px 24px rgba(0,0,0,0.6); transition:opacity .18s ease,transform .18s ease;
    }
    .vidu-close-btn.hidden{opacity:0;transform:translateY(-6px);pointer-events:none}

    @media (max-width: 500px) {
      .vidu-overlay { gap: 6px; padding: 6px 8px; left: 6px; right: 6px; bottom: 6px; }
      .vidu-btn { width: 40px; height: 40px; }
      .vidu-time { min-width: 70px; font-size: 12px; }
    }

    .vidu-volume-overlay {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; pointer-events: none; z-index: 100010;
    }
    .vidu-volume-card {
      display: flex;
      gap: 12px;
      align-items: center;
      min-width: 160px;
      padding: 12px 18px;
      border-radius: 12px;
      background: var(--bg-glass);
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
      border: 1px solid var(--border-color);
      backdrop-filter: blur(10px);
      transform: scale(0.86);
      opacity: 0;
      transition: transform .22s cubic-bezier(.2,.9,.2,1), opacity .22s ease;
      color: #f4fff4;
    }
    .vidu-volume-overlay.visible .vidu-volume-card { transform: scale(1); opacity: 1; }
    .vidu-vol-icon {
      width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;
    }
    .vidu-vol-percent { font-size: 18px; font-weight: 900; color: #fff; min-width: 46px; text-align: left; }
    .vidu-vol-sub { font-size: 12px; font-family: var(--font-mono); color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }

    .vidu-playback-menu {
      position: absolute; z-index: 100005; background: var(--bg-glass); border: 1px solid var(--border-color);
      backdrop-filter: blur(10px); border-radius: 8px; padding: 6px; box-shadow: 0 12px 30px rgba(0,0,0,0.6); min-width: 88px;
    }
    .vidu-playback-item {
      display: block; width: 100%; border: 0; padding: 8px 10px; color: var(--text-primary); text-align: center;
      font-weight: 800; cursor: pointer; border-radius: 6px; margin: 0; background: transparent; font-size: 13px;
    }
    .vidu-playback-item:hover { background: rgba(255,255,255,0.1); }
    .vidu-playback-item.active { background: rgba(0, 255, 138, 0.2); color: #fff; }

    /* ---- PLAYLIST POPUP ---- */
    .playlist-popup {
      position: fixed; inset: 12px; z-index: 600; display: none; align-items: center; justify-content: center; pointer-events: auto;
    }
    .playlist-popup.visible { display: flex; }
    .playlist-popup-inner {
      width: 100%;
      height: 100%;
      background: var(--bg-glass);
      border-radius: 14px;
      box-shadow: 0 40px 120px rgba(0,0,0,0.8);
      padding: 18px;
      border: 1px solid var(--border-color);
      backdrop-filter: blur(16px);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .playlist-popup-header {
      display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; flex-shrink: 0;
    }
    .playlist-popup-count {
      font-weight: 700; color: var(--text-primary); font-family: var(--font-mono); background: rgba(0, 255, 138, 0.1); padding: 8px 12px; border-radius: 8px; font-size: 14px; border: 1px solid rgba(0, 255, 138, 0.2);
    }
    .playlist-popup-title { font-size: 20px; font-weight: 900; color: #fff; flex: 1; text-align: left; margin-left: 16px; }
    .playlist-popup-close {
      border: 0; background: transparent; color: var(--text-secondary); font-weight: 800; font-size: 20px; cursor: pointer;
    }
    .playlist-popup-body {
      overflow: auto; border-radius: 10px; flex: 1;
    }
    .playlist-item {
      display: flex; gap: 16px; align-items: center; padding: 12px; border-radius: 10px;
      transition: background .12s ease; cursor: pointer; margin-bottom: 8px; background: rgba(255,255,255,0.02);
      border: 1px solid transparent;
    }
    .playlist-item:hover { background: rgba(255,255,255,0.05); border-color: var(--border-color); }
    .playlist-item-num-thumb {
      width: 120px; height: 68px; flex: 0 0 120px; border-radius: 8px; background: #000;
      display: flex; align-items: center; justify-content: center; font-size: 36px;
      font-weight: 900; color: var(--accent-primary);
      text-shadow: 0 0 8px var(--glow-color); user-select: none;
      border: 1px solid var(--border-color);
    }
    .playlist-item .meta { display: flex; flex-direction: column; gap: 4px; }
    .playlist-item .meta .t { font-weight: 700; color: #fff; font-size: 15px; }
    .playlist-item .meta .s { color: var(--text-secondary); font-size: 12px; }

    /* ---- LOADING INDICATORS ---- */
    .playlist-loading-indicator {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      height: 100%; gap: 18px; user-select: none; text-align: center;
    }
    .playlist-loading-indicator .spinner {
      width: 48px; height: 48px; border: 5px solid var(--border-color); border-top-color: var(--accent-primary);
      border-radius: 50%; animation: spin 1s linear infinite;
    }
    .playlist-loading-indicator .loading-text {
      font-size: 18px; font-weight: 800; color: var(--text-secondary);
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .loading-popup {
      position: fixed; inset: 0; z-index: 800; display: none; align-items: center;
      justify-content: center; pointer-events: none; background: rgba(0,0,0,0.5); backdrop-filter: blur(8px);
    }
    .loading-popup.visible { display: flex; pointer-events: auto; }
    .loading-card {
      width: min(540px, 90%); background: var(--bg-glass); padding: 24px; border-radius: 12px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.7); text-align: center; color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    .loading-label { font-weight: 700; margin-bottom: 16px; font-size: 16px; font-family: var(--font-mono); }
    .loading-bar-wrap { background: rgba(0,0,0,0.3); border-radius: 999px; height: 10px; overflow: hidden; border: 1px solid var(--border-color); }
    .loading-bar { height: 100%; width: 0%; border-radius: 999px; background: linear-gradient(90deg, var(--accent-secondary), var(--accent-primary)); transition: width 2s linear; }

    /* ---- FOOTER ---- */
    .copyright {
      text-align: center;
      margin-top: 40px;
      padding-bottom: 20px;
      color: var(--text-secondary);
      font-size: 13px;
    }
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="left">
        <a class="logo-btn" href="index.html" title="Home" aria-label="Home">
          <svg width="30" height="30" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
            <defs><linearGradient id="gV" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#00ff8a"/><stop offset="1" stop-color="#00b86a"/></linearGradient></defs>
            <rect x="4" y="4" width="56" height="56" rx="8" fill="rgba(10,12,16,0.5)"/>
            <path d="M16 16 L32 46 L48 16" stroke="url(#gV)" stroke-width="5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <nav class="nav" aria-label="Main navigation">
          <a href="index.html">üè† Home</a>
          <a href="about.html">‚ÑπÔ∏è About</a>
          <button id="nav-private"></button>
        </nav>
      </div>
      <button id="login-btn-top" class="login-btn-top">üîë Login</button>
    </div>
  </header>

  <main class="page" role="main">
    <div class="container">
      <h1 class="title">Private Classes</h1>
      <p class="subtitle">Access exclusive content by logging in with a permitted account. Contact VIDU to request access.</p>

      <section id="tiles" class="tiles" aria-live="polite"></section>
      <div class="copyright">¬© VIDU. All rights reserved.</div>
    </div>
  </main>

  <div id="login-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box" role="document">
      <button class="modal-close" id="login-close" aria-label="Close">‚úï</button>
      <h3 style="color:#dfeee1; font-weight:800; margin-bottom:16px; font-size: 22px;">üóùÔ∏è Secure Login</h3>
      <input id="login-username" class="login-input" type="text" placeholder="Username" autocomplete="username" />
      <input id="login-password" class="login-input" type="password" placeholder="Password" autocomplete="current-password" />
      <div class="login-actions">
        <button id="login-submit" class="btn">Login</button>
      </div>
      <p id="login-error" style="color:#ff8080;margin-top:12px;min-height:18px;"></p>
    </div>
  </div>

  <div id="access-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box" role="document">
        <button class="modal-close" id="access-close" aria-label="Close">‚úï</button>
        <p style="font-size: 20px; font-weight: 700; color: #eaf7ea; margin: 20px 0;">üîí Login Required</p>
        <p style="color: var(--text-secondary); margin-bottom: 24px;">You need to be logged in to access this content.</p>
        <div class="pw-actions">
            <button id="access-request-btn" class="btn">Request Access</button>
        </div>
    </div>
  </div>

  <div id="no-access-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box" role="document">
      <button class="modal-close" id="no-access-close" aria-label="Close">‚úï</button>
      <p style="font-size: 20px; font-weight: 700; color: #eaf7ea; margin: 20px 0;">üö´ Access Denied</p>
      <p style="color: var(--text-secondary); margin-bottom: 24px;">Your account does not have permission for this content.</p>
      <div class="pw-actions">
          <button id="no-access-request-btn" class="btn">Request Access</button>
      </div>
    </div>
  </div>

  <div id="pw-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box" role="document">
      <button class="modal-close" id="pw-close" aria-label="Close">‚úï</button>
      <div class="modal-preview" id="modal-preview"></div>
      <h3 id="pw-title" style="color:#dfeee1;font-weight:800;margin-bottom:6px;">Enter password</h3>
      <input id="pw-input" class="pw-input" type="password" placeholder="Password" autocomplete="off" />
      <div class="pw-actions">
        <button id="pw-submit" class="btn">Unlock</button>
        <button id="pw-cancel" class="btn ghost">Cancel</button>
      </div>
      <p id="pw-error" style="color:#ff8080;margin-top:10px;min-height:18px;"></p>
    </div>
  </div>

  <div id="viewer" class="viewer hidden" aria-hidden="true">
    <div class="viewer-inner">
      <div class="now-playing" aria-hidden="false">
        <div class="label">Now playing</div>
        <div class="title" id="now-playing-title">‚Äî</div>
      </div>
      <div id="iframe-wrap" class="iframe-wrap"></div>
      <button id="viewer-close" class="viewer-close" aria-label="Close viewer">‚úï</button>
    </div>
  </div>

  <div id="playlist-popup" class="playlist-popup" aria-hidden="true">
    <div class="playlist-popup-inner" role="dialog" aria-modal="true" aria-label="Playlist">
      <div class="playlist-popup-header">
        <div class="playlist-popup-title" id="playlist-popup-title">Playlist</div>
        <div class="playlist-popup-count" id="playlist-count">0 Videos</div>
        <button class="playlist-popup-close" id="playlist-popup-close" aria-label="Close playlist">‚úï</button>
      </div>
      <div class="playlist-popup-body" id="playlist-popup-body" tabindex="0"></div>
    </div>
  </div>

  <div id="loading-popup" class="loading-popup" aria-hidden="true">
    <div class="loading-card" role="status" aria-live="polite">
      <div class="loading-label">Initializing VIDU Player</div>
      <div class="loading-bar-wrap" aria-hidden="false">
        <div id="loading-bar" class="loading-bar" style="width:0%"></div>
      </div>
    </div>
  </div>

  <div id="js-fail-note" style="display:none;position:fixed;right:14px;bottom:14px;background:rgba(255,80,80,0.12);color:#ffdede;border:1px solid rgba(255,80,80,0.2);padding:8px 12px;border-radius:8px;font-size:13px;z-index:9999">Some features may be unavailable ‚Äî enable JavaScript.</div>

  <script>
  (function(){
    /* ---------- configuration ---------- */
    const YT_API_KEY = 'AIzaSyB8UVKOZOnUnYdqbFGOtlg6BPfR9HpD35c';
    const YT_API_LOAD_TIMEOUT = 18000;

    const userPermissions = {
      'vidu': { password: 'vidu123', access: ['PHONK', 'TEST', 'ICT', 'ET Speed Revision', 'ET Theory'] },
      'Imal': { password: '123', access: ['ET Speed Revision', 'ET Theory'] },
      'user': { password: 'password', access: ['PHONK', 'TEST'] }
    };
    let currentUser = null;
    let globalLastVolume = 100;

    const items = [
      { type: 'video', title: 'PHONK', idB64: btoa("m0fM0rBN7cQ"), passB64: btoa("")},
      { type: 'video', title: 'TEST', idB64: btoa("Lexok6H2c2s"), passB64: btoa("")},
      { type: 'playlist', title: 'ICT', idB64: btoa("PL9zX0VbNmKiFlxda5PCTn4_hA_7iKjEaA&si=9nF_7qpAzKt4cYZd"), passB64: btoa("6002vidu") },
      { type: 'playlist', title: 'ET Speed Revision', idB64: btoa("PL9zX0VbNmKiF-Q7bnmM1v_DrT3_Ol-Of5&si=efJHPzWR-kZcGwYw"), passB64: btoa("amilaet") },
      { type: 'playlist', title: 'ET Theory', idB64: btoa("PL9zX0VbNmKiFKQ388JcZsq18mlyIe7BeI&si=cn4rwat6rsqC8kH_"), passB64: btoa("amilaet") }
    ];

    /* ---------- utilities ---------- */
    function escapeHtml(s){ return String(s || '').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
    function normalizeIdFromB64(idB64){
      try { return atob(idB64 || '').split('&')[0]; } catch(e){ console.warn('Invalid idB64', idB64, e); return ''; }
    }

    /* ---------- RENDER TILES ---------- */
    function buildTiles(){
      const tiles = document.getElementById('tiles');
      if (!tiles) return;
      tiles.innerHTML = '';
      items.forEach((it, idx)=>{
        const card = document.createElement('button');
        card.className = 'card';
        card.type = 'button';
        card.setAttribute('data-idx', idx);
        card.setAttribute('aria-label', it.title + ' ' + it.type);
        card.setAttribute('data-type', it.type);
        
        card.innerHTML = `
          <div class="card-glow"></div><div class="card-border"></div>
          <div class="card-thumbnail">
            <div class="thumbnail-overlay"></div>
            <div class="thumbnail-icon">
              ${it.type === 'playlist' ? 
                `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4"/><path d="M14 7h6"/><path d="M14 11h6"/><path d="M14 15h6"/></svg>` : 
                `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>`
              }
            </div>
          </div>
          <div class="card-content">
            <span class="card-type">${escapeHtml(it.type)}</span><h3 class="card-title">${escapeHtml(it.title)}</h3>
          </div>
        `;
        card.addEventListener('click', ()=> handleTileClick(it));
        tiles.appendChild(card);
      });
    }

    /* ---------- modal helpers ---------- */
    function showModal(el){ el.classList.remove('hidden'); el.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
    function closeModal(el){ el.classList.add('hidden'); el.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }

    /* ---------- Playlist popup helpers ---------- */
    let lastOpenedPlaylistItem = null;
    const playlistCache = {}; 
    const playlistPopup = document.getElementById('playlist-popup');
    const playlistBody = document.getElementById('playlist-popup-body');
    const playlistCountEl = document.getElementById('playlist-count');
    const playlistTitleEl = document.getElementById('playlist-popup-title');
    const playlistCloseBtn = document.getElementById('playlist-popup-close');
    const loadingPopup = document.getElementById('loading-popup');
    const loadingBar = document.getElementById('loading-bar');

    function renderPlaylistBody(videos) {
      playlistBody.innerHTML = '';
      playlistCountEl.textContent = `${videos.length} Videos`;
      if (!videos.length) {
        playlistBody.innerHTML = `<div style="padding:18px;color:#ffdede">No videos found.</div>`;
        return;
      }
      videos.forEach((v, index) => {
        const node = document.createElement('div');
        node.className = 'playlist-item';
        node.innerHTML = `
          <div class="playlist-item-num-thumb">${index + 1}</div>
          <div class="meta"><div class="t">${escapeHtml(v.title)}</div><div class="s">Click to play</div></div>`;
        node.tabIndex = 0;
        const clickHandler = () => { closePlaylistPopup(); showLoadingPopupThenPlay(v); };
        node.addEventListener('click', clickHandler);
        node.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); clickHandler(); } });
        playlistBody.appendChild(node);
      });
      playlistBody.scrollTop = 0;
    }

    function openPlaylistPopup(item) {
      playlistTitleEl.textContent = item.title || 'Playlist';
      lastOpenedPlaylistItem = item;
      const playlistId = normalizeIdFromB64(item.idB64 || '');
      playlistPopup.classList.add('visible');
      playlistPopup.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';

      if (playlistCache[playlistId]) {
        renderPlaylistBody(playlistCache[playlistId]);
      } else {
        playlistCountEl.textContent = 'Loading...';
        playlistBody.innerHTML = `<div class="playlist-loading-indicator"><div class="spinner"></div><div class="loading-text">Fetching Playlist...</div></div>`;
        (async () => {
          try {
            const videos = await fetchPlaylistVideos(playlistId);
            playlistCache[playlistId] = videos; 
            if (lastOpenedPlaylistItem === item && playlistPopup.classList.contains('visible')) renderPlaylistBody(videos);
          } catch (err) {
            console.error("Playlist fetch error:", err);
            if (lastOpenedPlaylistItem === item && playlistPopup.classList.contains('visible')) {
              playlistBody.innerHTML = `<div style="padding:18px;color:#ffdede">Failed to load: ${escapeHtml(err.message)}</div>`;
              playlistCountEl.textContent = 'Error';
            }
          }
        })();
      }
    }

    function closePlaylistPopup(){
      playlistPopup.classList.remove('visible');
      playlistPopup.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
    }

    playlistCloseBtn.addEventListener('click', closePlaylistPopup);
    playlistPopup.addEventListener('click', (e)=> { if(e.target === playlistPopup) closePlaylistPopup(); });

    function showLoadingPopupThenPlay(v){
      loadingBar.style.transition = 'none';
      loadingBar.style.width = '0%';
      loadingPopup.classList.add('visible');
      loadingPopup.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      setTimeout(()=>{
        loadingBar.style.transition = 'width 2s linear';
        loadingBar.style.width = '100%';
      }, 20);
      setTimeout(()=>{
        loadingPopup.classList.remove('visible');
        loadingPopup.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
        const videoItem = { type: 'video', title: v.title, idB64: btoa(v.videoId) };
        openViewer(videoItem);
      }, 2000);
    }

    function handleTileClick(item) {
        if (currentUser) {
            if (currentUser.permissions.includes(item.title)) {
                if (item.type === 'playlist') openPlaylistPopup(item);
                else { lastOpenedPlaylistItem = null; openViewer(item); }
            } else showModal(document.getElementById('no-access-modal'));
        } else showModal(document.getElementById('access-modal'));
    }
    
    /* ---------- YT API loader ---------- */
    function loadYTApi(){
      if(window.YT && window.YT.Player) return Promise.resolve();
      if(window._vidu_loading_yt_promise) return window._vidu_loading_yt_promise;
      return window._vidu_loading_yt_promise = new Promise((resolve, reject)=>{
        const s = document.createElement('script'); s.src = 'https://www.youtube.com/iframe_api'; s.async = true;
        s.onerror = () => reject(new Error('YT API failed to load')); document.head.appendChild(s);
        window.onYouTubeIframeAPIReady = resolve;
        setTimeout(()=> reject(new Error('YT API timed out')), YT_API_LOAD_TIMEOUT);
      });
    }

    /* ---------- Player module ---------- */
    (function playerModule(){
      if(window.__viduPlayerLoaded) return;
      window.__viduPlayerLoaded = true;
      const state = { player: null, updateInterval: null, keyHandler: null };
      function pad2(n){ return (n < 10 ? '0' : '') + Math.floor(n||0); }
      function fmtTime(s){ const h=s/3600, m=(s%3600)/60, sec=s%60; return (h >= 1 ? pad2(h)+':' : '')+pad2(m)+':'+pad2(sec); }
      const svgs = {
        play: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>`,
        pause: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`,
        gear: `<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>`,
        enterFs: `<svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6m-2-4L11 13m-2 8H3v-6m2 4l8-8"/></svg>`,
        exitFs: `<svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9V3h6m4 2L5 13m16-2v6h-6m-2-4l8 8"/></svg>`
      };

      async function createYTPlayer(videoId, mountRootId='player-wrap'){
        await loadYTApi();
        const root = document.getElementById(mountRootId);
        if(!root) throw new Error('Mount point not found');
        root.innerHTML = `<div class="vidu-player-host" id="vidu_host"><div class="vidu-mount" id="vidu_mount"></div></div>`;
        const host = document.getElementById('vidu_host');
        host.insertAdjacentHTML('beforeend', `<div class="vidu-loading"></div><div class="vidu-controls-bg"></div><div class="vidu-overlay">
          <button class="vidu-btn" id="vidu_playbtn">${svgs.play}</button>
          <div class="vidu-time" id="vidu_cur">${fmtTime(0)}</div>
          <input id="vidu_seek" class="vidu-range" type="range" min="0" max="100" step="0.1" value="0"/>
          <div class="vidu-time" id="vidu_dur">${fmtTime(0)}</div>
          <button class="vidu-btn" id="vidu_playbackbtn">${svgs.gear}</button>
          <button class="vidu-btn" id="vidu_fullbtn">${svgs.enterFs}</button>
        </div><div class="vidu-volume-overlay"></div>`);
        
        const playBtn=document.getElementById('vidu_playbtn'), seekEl=document.getElementById('vidu_seek'),
              curEl=document.getElementById('vidu_cur'), durEl=document.getElementById('vidu_dur'),
              fullBtn=document.getElementById('vidu_fullbtn');

        const toggleFullscreen = () => {
          if(!document.fullscreenElement) host.requestFullscreen().catch(err => console.error(err));
          else document.exitFullscreen();
        };
        document.onfullscreenchange = () => { fullBtn.innerHTML = document.fullscreenElement ? svgs.exitFs : svgs.enterFs; };
        
        state.keyHandler = (e) => {
            // Volume control
            if(e.key === 'ArrowUp' || e.key === 'ArrowDown'){
                e.preventDefault();
                const current = state.player.getVolume();
                const target = e.key === 'ArrowUp' ? Math.min(current + 5, 100) : Math.max(current - 5, 0);
                state.player.setVolume(target); globalLastVolume = target;
            }
            // MODIFIED: Arrow key seeking restored
            if(e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                e.preventDefault();
                const cur = state.player.getCurrentTime();
                const dur = state.player.getDuration();
                const delta = e.key === 'ArrowRight' ? 10 : -10;
                let target = Math.max(0, cur + delta);
                if (dur) target = Math.min(target, dur);
                state.player.seekTo(target, true);
            }
            if (document.activeElement.tagName === 'INPUT') return;
            if(e.code === 'Space') { e.preventDefault(); state.player.getPlayerState() === 1 ? state.player.pauseVideo() : state.player.playVideo(); }
            if(e.code === 'KeyF') { e.preventDefault(); toggleFullscreen(); }
        };

        document.addEventListener('keydown', state.keyHandler);
        playBtn.onclick = () => { state.player.getPlayerState() === 1 ? state.player.pauseVideo() : state.player.playVideo(); };
        fullBtn.onclick = toggleFullscreen;

        const updateSeekBg = () => { const v = seekEl.value; seekEl.style.background = `linear-gradient(to right, var(--accent-primary) ${v}%, rgba(255,255,255,0.2) ${v}%)`; };
        seekEl.oninput = () => { if(seekEl._drag) { const dur=state.player.getDuration(); curEl.textContent=fmtTime(dur*(seekEl.value/100)); } updateSeekBg(); };
        seekEl.onpointerdown = () => seekEl._drag=true;
        seekEl.onpointerup = () => { seekEl._drag=false; state.player.seekTo(state.player.getDuration()*(seekEl.value/100)); };
        
        return new Promise((resolve, reject) => {
          state.player = new YT.Player('vidu_mount', { videoId, playerVars: {autoplay:1, controls:0, rel:0, iv_load_policy:3}, events: {
            onReady: (e) => {
              e.target.setVolume(globalLastVolume);
              state.updateInterval = setInterval(() => {
                if(!state.player) return;
                const cur=state.player.getCurrentTime(), dur=state.player.getDuration();
                if(!seekEl._drag) seekEl.value = (cur/dur)*100 || 0;
                curEl.textContent = fmtTime(cur); durEl.textContent = fmtTime(dur); updateSeekBg();
              }, 250);
              resolve(e.target);
            },
            onStateChange: (e) => {
              if (e.data === 1) document.querySelector('.vidu-loading').style.display='none';
              playBtn.innerHTML = e.data === 1 ? svgs.pause : svgs.play;
            },
            onError: (e) => reject(new Error(`YT Player Error: ${e.data}`))
          }});
        });
      }
      
      function destroyPlayer(){
        if(state.player) { try { state.player.destroy(); } catch(e){} state.player = null; }
        if(state.updateInterval) clearInterval(state.updateInterval);
        if(state.keyHandler) document.removeEventListener('keydown', state.keyHandler);
        document.onfullscreenchange = null;
        const host = document.getElementById('vidu_host'); if(host) host.remove();
      }
      window.showViduPlayer = createYTPlayer;
      window.destroyViduPlayer = destroyPlayer;
    })();

    /* ---------- Playlist fetcher ---------- */
    async function fetchPlaylistVideos(playlistId){
      const url=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${YT_API_KEY}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error(`API Error ${res.status}`);
      const data = await res.json();
      return (data.items || []).map(i => ({ videoId: i.snippet.resourceId.videoId, title: i.snippet.title }));
    }

    /* ---------- open viewer helper ---------- */
    function openViewer(item){
      const viewer = document.getElementById('viewer');
      if(!viewer) return;
      document.getElementById('now-playing-title').textContent = item.title || 'Now playing';
      viewer.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      window.showViduPlayer(normalizeIdFromB64(item.idB64), 'iframe-wrap').catch(err=>{
        document.getElementById('iframe-wrap').innerHTML = `<div style="padding:18px;color:#ffdede;">${escapeHtml(err.message)}</div>`;
      });
    }

    document.getElementById('viewer-close').addEventListener('click', ()=>{
      const v = document.getElementById('viewer');
      if(v) v.classList.add('hidden');
      window.destroyViduPlayer();
      document.body.style.overflow = '';
      if(lastOpenedPlaylistItem){ setTimeout(()=> openPlaylistPopup(lastOpenedPlaylistItem), 120); }
    });

    /* ===== Login & access UI wiring ===== */
    const loginBtnTop = document.getElementById('login-btn-top');
    const loginModal = document.getElementById('login-modal');
    const loginClose = document.getElementById('login-close');
    const loginUsernameInput = document.getElementById('login-username');
    const loginPasswordInput = document.getElementById('login-password');
    const loginSubmit = document.getElementById('login-submit');
    const loginError = document.getElementById('login-error');
    const accessModal = document.getElementById('access-modal');
    const accessClose = document.getElementById('access-close');
    const accessRequestBtn = document.getElementById('access-request-btn');
    const noAccessModal = document.getElementById('no-access-modal');
    const noAccessClose = document.getElementById('no-access-close');
    const noAccessRequestBtn = document.getElementById('no-access-request-btn');
    const requestAccessLink = 'https://wa.me/254703255099';

    function handleLogin() {
        const username = loginUsernameInput.value.trim();
        const password = loginPasswordInput.value.trim();
        const userAccount = userPermissions[username];
        if (userAccount && userAccount.password === password) {
            currentUser = { username, permissions: userAccount.access || [] };
            alert('‚úÖ Logged in successfully!');
            closeModal(loginModal);
            loginBtnTop.textContent = `‚úÖ Logged In as ${username}`;
            loginBtnTop.disabled = true;
        } else {
            loginError.textContent = 'Invalid username or password.';
        }
    }

    loginBtnTop.addEventListener('click', () => {
        loginError.textContent = '';
        loginUsernameInput.value = '';
        loginPasswordInput.value = '';
        showModal(loginModal);
        loginUsernameInput.focus();
    });

    loginClose.addEventListener('click', () => closeModal(loginModal));
    loginModal.addEventListener('click', (e) => { if (e.target === loginModal) closeModal(loginModal); });
    loginSubmit.addEventListener('click', handleLogin);
    loginPasswordInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') handleLogin(); });
    accessClose.addEventListener('click', () => closeModal(accessModal));
    accessModal.addEventListener('click', (e) => { if (e.target === accessModal) closeModal(accessModal); });
    accessRequestBtn.addEventListener('click', () => window.open(requestAccessLink, '_blank'));
    noAccessClose.addEventListener('click', () => closeModal(noAccessModal));
    noAccessModal.addEventListener('click', (e) => { if (e.target === noAccessModal) closeModal(noAccessModal); });
    noAccessRequestBtn.addEventListener('click', () => window.open(requestAccessLink, '_blank'));

    buildTiles();
  })();
  </script>
</body>
</html>
